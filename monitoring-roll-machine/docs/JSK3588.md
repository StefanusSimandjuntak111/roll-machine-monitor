JSK3588通信协议

16进制

波特率 19200

校验位 无

数据位 8

停止位 1


PC发送格式： 55 aa com D1 D0 和校验

COM分为两部分 Addr（4bit）＋OOM（4bit）

Addr: 0~15

COM： 0~15


PC接收格式： 55 aa com len D6 D5 D4 D3 D2 D1 D0 和校验

COM分为两部分 COM（4bit）＋Addr（4bit） 与发送时高低位置相反


目前地址都为0，指令兼容原程序

例如：查询当前状态

上位机发送：

55 AA 02 00 00 01

下位机返回：

55 AA 20 0C 01 00 00 23 00 00 01 50

D6.bit0 保留小数点1位 0.1

D6. bit4 码制 0＝米制，1＝码制


D5D4D3 当前计数值

D2D1 当前速度

D0 当前班次


新补充代码

1 当前采集数据清零，返回采集数据（发送命令：55 AA 01 00 00 00）

2 查询采集数据

4 累计数据清零，返回累计数据


10 设置长度D3D2

11 设置长度D1D0

12 设置系数D3D2

13 设置系数D1D0


例:

设置长度：0000000a

先发送

55 aa 0a 00 00 09

返回

55 AA A0 0C 00 00 00 0C 01 00 00 B8

再发送

55 aa 0b 00 0a 14

返回

55 AA B0 0C 00 00 00 0A 01 00 00 C6


55＋aa＋ com_addr＋len＋D3D2D1D0＋标志＋0＋0＋校验

标志位 0＝命令不成功，1＝命令成功


两次指令间隔要在1秒钟内完成，否则前一条命令失效，需重新发送第一条命令

两次指令合成一个32位的设置值



目前完成指令：2，3，10，11，12，13，可以再补充，命令最多支持：16条

双向通信增加协议：


发送55 AA 02 00 00 01查询当前长度


反馈55 AA 20 0C 01 00 00 23 00 00 01 50

55 AA 20协议头

0C 数据长度

01 01&0F系数（当值为00 长度速度*1

01 长度速度 *0.1

02 长度速度 *0.01）


01＆10（米制00

码制10）

00 00 23当前长度

00 00 当前速度